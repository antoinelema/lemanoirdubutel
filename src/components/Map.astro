---
interface Props {
  lat?: number;
  lon?: number;
  zoom?: number;
  height?: string;
}

const {
  lat = 49.017335,
  lon = -0.943841,
  zoom = 14,
  height = '400px',
} = Astro.props;

const mapUrl = `https://www.openstreetmap.org/export/embed.html?bbox=${lon - 0.02}%2C${lat - 0.01}%2C${lon + 0.02}%2C${lat + 0.01}&layer=mapnik&marker=${lat}%2C${lon}`;
---

<div class="rounded-lg overflow-hidden shadow-md" style={`height: ${height}`}>
  <iframe
    title="Carte Le Manoir du Butel"
    src={mapUrl}
    class="w-full h-full border-0"
    loading="lazy"
    referrerpolicy="no-referrer"
  ></iframe>
</div>
<p class="text-xs text-stone-dark mt-2 text-center">
  <a
    href={`https://www.openstreetmap.org/?mlat=${lat}&mlon=${lon}#map=${zoom}/${lat}/${lon}`}
    target="_blank"
    rel="noopener noreferrer"
    class="hover:text-moss"
  >
    Voir sur OpenStreetMap
  </a>
</p>
